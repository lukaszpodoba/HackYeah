<div class="w-full">
  <label class="block mb-2 font-semibold text-slate-700">{{ label }}</label>

  <div class="relative">
    <select
      class="w-full px-3 py-3 border-2 border-slate-200 rounded-md text-base focus:outline-none focus:border-sky-500 bg-white disabled:bg-slate-100"
      [disabled]="disabled() || stopsLoading()"
      [value]="value() ?? ''"
      (change)="onSelectChange($event)"
      (focus)="loadStopsIfNeeded()"
      (click)="loadStopsIfNeeded()"
    >
      @if (!stopsLoaded() && !stopsLoading()) {
      <option value="">— kliknij, aby załadować listę —</option>
      } @if (stopsLoading()) {
      <option value="">Ładowanie…</option>
      } @else {
      <option value="" disabled selected>{{ placeholder }}</option>
      @for (stop of stops(); track stop) {
      <option [value]="stop.stop_code">{{ stop.stop_name }}</option>
      } }
    </select>

    @if (stopsError()) {
    <p class="mt-2 text-sm text-red-600">{{ stopsError() }}</p>
    }
  </div>
</div>
